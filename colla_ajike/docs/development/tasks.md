# 実装タスク一覧

## 完了済みタスク ✅

### 1. プロジェクト基盤とコア設定の構築
- [x] Node.js + TypeScript + Slack Bolt framework の初期設定
- [x] Supabase プロジェクトの作成とデータベース接続設定
- [x] 環境変数管理と Slack OAuth 設定

### 2. データベース設計と実装
- [x] 2.1 Supabase テーブル定義とマイグレーション作成
  - User, Profile, Question, ShuffleResponse, Coffee, DailyReport, Survey, SurveyResponse テーブルの作成
  - 外部キー制約とインデックスの設定

- [x] 2.2 TypeScript インターフェースとリポジトリクラスの実装
  - データモデルの TypeScript インターフェース定義
  - 各テーブル用の Repository クラス実装（CRUD 操作）
  - Supabase クライアントとの統合

### 3. Slack Bot 基盤
- [x] 3.1 基本的な Slack イベントハンドリング
  - SlackBotApp クラスの実装
  - EventHandler と CommandHandler の基本構造
  - Slack アプリの認証とワークスペース接続

- [x] 3.2 ユーザー管理とプロフィール同期
  - Slack ユーザー情報の取得と同期
  - 新規ユーザーの自動登録機能
  - ユーザー情報の更新処理

### 4. シャッフル機能
- [x] 4.1 質問管理システム
  - QuestionRepository の実装
  - デフォルト質問のシードデータ作成
  - カスタム質問の追加・編集・削除機能

- [x] 4.2 ランダム質問配信システム
  - ShuffleService クラスの実装
  - ランダムメンバー選択ロジック
  - 質問送信とチャンネル投稿機能

- [x] 4.3 定期実行とスケジューリング
  - ScheduleManager の実装
  - cron job または Supabase Edge Functions での定期実行
  - 実行頻度の設定機能

### 5. プロフィール機能
- [x] 5.1 プロフィール作成・編集インターフェース
  - Slack モーダルを使用したプロフィール入力フォーム
  - ProfileService クラスの実装
  - バリデーション機能

- [x] 5.2 プロフィール表示とレンダリング
  - ProfileRenderer クラスの実装
  - 「取扱説明書」形式での情報表示
  - プロフィール検索・閲覧機能

### 6. ホットコーヒーシステム
- [x] 6.1 ホットコーヒー送信機能
  - CoffeeService クラスの実装
  - Slack コマンドまたはショートカットでのコーヒー送信
  - メッセージ付きコーヒーの処理

- [x] 6.2 ランキングと集計機能
  - RankingService クラスの実装
  - 月次コーヒー集計処理
  - コーヒーアワードの生成と発表

### 7. 日報機能 → 企画中止により停止
- [x] 7.1 日報投稿システム → **中断**
  - DailyService クラスの実装（途中中断）
  - コンディション選択（天気アイコン等）（途中中断）
  - 進捗とメモの入力機能（途中中断）

- [x] 7.2 日報表示と履歴管理 → **中断**
  - ConditionTracker クラスの実装（途中中断）
  - チームメンバーの日報一覧表示（途中中断）
  - 履歴データの管理（途中中断）

### 8. アンケート機能
- [x] 8.1 アンケート作成システム
  - SurveyBuilder クラスの実装
  - 質問タイプ（選択肢、自由記述等）の対応
  - テンプレート機能

- [x] 8.2 アンケート配信と回答収集
  - ResponseCollector クラスの実装
  - Slack 内でのアンケート表示
  - 回答データの収集と保存

### 9. AI 対話機能
- [x] 9.1 OpenAI API 統合
  - AIDialogueService クラスの実装
  - OpenAI API クライアントの設定
  - プロンプト設計と応答処理

- [x] 9.2 ナレッジ抽出とコンテキスト構築
  - KnowledgeExtractor クラスの実装
  - ContextBuilder クラスの実装
  - 蓄積データからの関連情報抽出

### 10. 分析・レポート機能
- [x] 10.1 データ分析システム
  - AnalyticsService クラスの実装
  - 利用状況の可視化
  - エンゲージメント指標の計算

- [x] 10.2 レポート生成とエクスポート
  - ReportGenerator クラスの実装
  - DataExporter クラスの実装
  - CSV/JSON 形式でのデータエクスポート

## 残りのタスク 📋

### 11. 管理・設定機能の実装
- [ ] 11.1 管理者向け設定画面
  - 質問カテゴリー管理
  - 部門・チーム設定
  - 運用ポリシー設定

- [ ] 11.2 セキュリティとアクセス制御
  - 権限管理システム
  - セキュリティ設定
  - 監査ログ機能

### 12. テストとエラーハンドリングの実装
- [ ] 12.1 ユニットテストの作成
  - 各サービスクラスのテスト
  - データモデルのバリデーションテスト
  - モック機能の実装

- [ ] 12.2 統合テストと E2E テスト
  - Slack API 連携テスト
  - データベース統合テスト
  - エンドツーエンドフローテスト

### 13. デプロイメントと運用準備
- [ ] 13.1 本番環境設定
  - Vercel/Railway でのデプロイ設定
  - 環境変数とシークレット管理
  - CI/CD パイプラインの構築

- [ ] 13.2 監視とログ設定
  - アプリケーション監視
  - エラーログとパフォーマンス監視
  - アラート設定

## 現在の優先事項

1. **シャッフル機能完了** - ✅ 達成済み（100%）
2. **Socket Mode対応の完了** - ngrok不要の開発環境
3. **基本機能の安定化** - 既存機能の信頼性向上
4. **テストカバレッジの向上** - 品質保証の強化
5. **ドキュメント整備** - 運用・保守の効率化

## 関連ドキュメント

- [プロジェクト設計](../setup/design.md)
- [機能別要件](../features/)
- [開発ガイド](guide.md)