# Slack Knowledge Hub - Claude Code 司令塔

このファイルは、Slack Knowledge Hub プロジェクトの **司令塔** であり、Claude Code での作業時に参照されるマスター制御ファイルです。

## プロジェクト概要

Slack を単なるコミュニケーションツールから組織の貴重な知識資産が集積・活用される「ナレッジハブ」へと昇華させる Slack アプリです。

## プロジェクト管理フロー

### タスク実行の4段階フロー

#### 1. 要件定義フェーズ
- **開始条件**: 新機能の追加や既存機能の改善要請
- **参照先**: 該当機能の `docs/features/{機能名}/requirements.md`
- **実行内容**: 
  - 目的の明確化、現状把握、成功基準の設定
  - 受け入れ基準の定義
  - ユーザーストーリーの作成
- **成果物**: 更新された要件定義書
- **必須確認**: 「要件定義フェーズが完了しました。設計フェーズに進んでよろしいですか？」

#### 2. 設計フェーズ
- **開始条件**: 要件定義の完了確認後
- **参照先**: `docs/setup/design.md`
- **実行内容**:
  - アーキテクチャ設計の検討
  - 実施手順決定、問題点の特定
  - 技術的制約の確認
- **成果物**: 更新された設計書
- **必須確認**: 「設計フェーズが完了しました。タスク化フェーズに進んでよろしいですか？」

#### 3. タスク化フェーズ
- **開始条件**: 設計フェーズの完了確認後
- **参照先**: `docs/development/tasks.md`
- **実行内容**:
  - タスクを実行可能な単位に分解
  - 優先順位設定と依存関係の整理
  - 実装計画の策定
- **成果物**: 更新されたタスク一覧
- **必須確認**: 「タスク化フェーズが完了しました。実行フェーズに進んでよろしいですか？」

#### 4. 実行フェーズ
- **開始条件**: タスク化フェーズの完了確認後
- **参照先**: `docs/development/tasks.md`、関連する機能ドキュメント
- **実行内容**:
  - タスクを順次実行
  - 進捗を `docs/development/tasks.md` に更新
  - 各タスク完了時に報告
- **成果物**: 実装されたコード、更新されたドキュメント

## ドキュメント体系

### 📁 docs/ ディレクトリ構成

```
docs/
├── features/              # 機能別ドキュメント
│   ├── analytics/         # 分析・レポート機能
│   ├── ai/               # AI対話機能
│   ├── admin/            # 管理・設定機能
│   ├── coffee/           # ホットコーヒーシステム
│   ├── profile/          # プロフィール機能
│   ├── shuffle/          # シャッフル機能
│   └── survey/           # アンケート機能
├── setup/                # セットアップ・設計
│   ├── design.md         # 総合設計書
│   ├── setup-guide.md   # セットアップガイド
│   └── environment.md   # 環境設定
├── user/                 # ユーザー向けドキュメント
│   ├── USER_GUIDE.md    # ユーザーガイド
│   └── admin-guide.md   # 管理者ガイド
└── development/          # 開発関連
    ├── tasks.md          # 実装タスク一覧
    ├── guide.md          # 開発ガイド
    └── testing/          # テスト関連
```

## 実行ルール

### ファイル操作ルール
- **新規機能開発時**: 既存ファイルの内容を確認してから編集
- **ドキュメント更新時**: 関連する全てのドキュメントの整合性を確認
- **段階的実装**: 一度に全てを変更せず、小さな変更を積み重ねる

### フェーズ管理ルール
- **各段階開始時**: 「{前段階}の文書を確認しました」と報告
- **各段階の最後**: 期待通りの結果になっているか確認
- **要件定義なしの実装禁止**: 必ず要件定義から開始

### 品質管理ルール
- **エラー解決優先**: エラーは解決してから次へ進む
- **テスト実行**: 実装後は必ずテストを実行
- **ドキュメント同期**: コード変更時は関連ドキュメントも更新
- **指示範囲遵守**: 指示にない機能を勝手に追加しない

## 機能開発の標準プロセス

### 新機能追加時の手順

1. **📋 要件確認**
   ```
   - docs/features/{機能名}/requirements.md を確認
   - 受け入れ基準を理解
   - 不足している要件があれば更新
   ```

2. **🏗️ 設計検討**
   ```
   - docs/setup/design.md を参照
   - アーキテクチャへの影響を評価
   - 必要に応じて設計を更新
   ```

3. **📝 タスク分解**
   ```
   - docs/development/tasks.md に実装タスクを追加
   - 優先順位と工数を設定
   - 依存関係を明確化
   ```

4. **⚡ 実装実行**
   ```
   - コーディング
   - テスト作成・実行
   - ドキュメント更新
   ```

## プロジェクト状況

### 📊 現在の実装状況

- ✅ **完了機能**: シャッフル、プロフィール、コーヒー、アンケート、AI対話、分析
- 🔄 **進行中機能**: 管理・設定機能
- ⏳ **未実装機能**: 高度なセキュリティ機能、監査ログ

### 🎯 優先事項

1. **基本機能の安定化** - 既存機能の信頼性向上
2. **テストカバレッジの向上** - 品質保証の強化
3. **管理機能の実装** - 運用に必要な管理画面
4. **ドキュメント整備** - 運用・保守の効率化
5. **本番環境対応** - デプロイとCI/CD設定

## 司令塔機能

### 🎮 プロジェクト制御

- **ワークフロー管理**: 4段階フローの進行制御
- **品質管理**: テスト・検証のチェックポイント管理
- **ドキュメント管理**: 関連文書の整合性維持
- **進捗管理**: タスクの完了状況とマイルストーン管理

### 📚 参照すべきドキュメント

| フェーズ | 主要参照先 | 補助参照先 |
|----------|------------|------------|
| 要件定義 | `docs/features/{機能}/requirements.md` | 既存の関連機能 |
| 設計 | `docs/setup/design.md` | `docs/features/` |
| タスク化 | `docs/development/tasks.md` | `docs/setup/design.md` |
| 実行 | `docs/development/tasks.md` | 実装対象の機能ドキュメント |

### 🔧 開発時の注意点

- **Socket Mode**: ngrok不要の開発環境を使用
- **TypeScript**: 型安全性を重視した実装
- **Supabase**: データベース操作は Repository パターンを使用
- **テスト**: ユニットテスト・統合テストを並行実行
- **ログ**: 構造化ログによる問題追跡

---

**このファイルは司令塔として機能します。詳細な仕様は各機能のドキュメントを参照してください。**