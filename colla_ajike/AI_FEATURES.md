# AI機能詳細ガイド

## 🤖 AI対話機能の概要

Slack Knowledge Hubは**gpt-4o-mini**を採用したコスト最適化AI機能を提供します。

### 💰 コスト最適化の詳細

| 項目 | 変更前 | 変更後 | 削減効果 |
|------|--------|--------|----------|
| **AIモデル** | gpt-3.5-turbo | gpt-4o-mini | 50-70%コスト削減 |
| **最大トークン数** | 500 tokens | 300 tokens | 40%削減 |
| **月間コスト例** | $45 (1000回利用) | $14 (1000回利用) | **約69%削減** |

### 🎯 利用可能な機能パターン

#### 1. **シンプルな挨拶・応答**
```
@knowledge_hub こんにちは
@knowledge_hub おはようございます  
@knowledge_hub お疲れ様
@knowledge_hub ありがとう
```

**特徴:**
- **完全無料** (OpenAI APIを使用しない定型応答)
- **即座に応答** (レスポンス時間: <1秒)
- **信頼度100%** の安定した機能

#### 2. **スキル・専門家検索**
```
@knowledge_hub Reactのスキルを持つ人はいますか？
@knowledge_hub TypeScriptに詳しい人を探しています
@knowledge_hub デザインが得意な人は誰ですか？
@knowledge_hub データベース設計に詳しい人は？
```

**特徴:**
- **データベース検索ベース** で高精度
- **実際のプロフィール情報**から抽出
- **具体的な人名と連絡方法**を提供

#### 3. **ユーザー情報照会**
```
@knowledge_hub 田中さんの得意なことは？
@knowledge_hub 山田さんの専門分野を教えて
@knowledge_hub 鈴木さんのスキルレベルは？
```

**特徴:**
- **プロフィールデータ**と**過去の知識共有履歴**を分析
- **働き方スタイル**や**コミュニケーション方法**も表示
- **最新の活動状況**も含めて回答

#### 4. **一般的な技術質問**
```
@knowledge_hub プロジェクト管理について教えて
@knowledge_hub コードレビューのベストプラクティスは？
@knowledge_hub チーム開発で重要なことは？
@knowledge_hub スクラム開発の進め方は？
```

**特徴:**
- **gpt-4o-mini**による高品質な回答
- **組織内の知識ベース**と組み合わせた回答
- **実用的なアドバイス**を簡潔に提供

## ⚡ パフォーマンス特性

### 応答時間
- **定型応答** (挨拶等): 0.5-1秒
- **データベース検索** (スキル検索等): 1-2秒  
- **AI生成応答** (一般質問等): 3-5秒
- **エラー時フォールバック**: 1秒以内

### 精度・信頼度
- **定型応答**: 100%
- **データベース検索**: 95-99%
- **AI生成応答**: 85-95% (内容による)
- **フォールバック応答**: 90%

## 🔧 技術的な仕組み

### 処理フロー
1. **メンション検出** → 2. **クエリ分類** → 3. **適切な処理方式選択**

```
@knowledge_hub [入力]
      ↓
   クエリ分類
      ↓
┌─────────────────┬─────────────────┬─────────────────┐
│   定型応答      │  データベース検索 │   AI生成応答    │
│   (無料・高速)   │   (中コスト)      │  (OpenAI API)   │
├─────────────────┼─────────────────┼─────────────────┤
│ ・挨拶         │ ・スキル検索      │ ・一般的質問    │
│ ・感謝         │ ・ユーザー照会    │ ・技術相談      │
│ ・基本応答      │ ・組織内検索      │ ・アドバイス    │
└─────────────────┴─────────────────┴─────────────────┘
```

### コスト最適化戦略
1. **段階的処理**: 簡単な質問は定型応答で無料処理
2. **トークン制限**: 300トークンで簡潔な回答
3. **キャッシュ活用**: よくある質問の結果を保存
4. **エラー時フォールバック**: API障害時も機能継続

## 📊 利用統計・制限

### 推奨利用パターン
- **1日あたり**: 50-100回程度の利用
- **1回あたり**: 簡潔な質問（50-100文字程度）
- **継続的利用**: 月間1000回程度まで低コストで運用可能

### 制限事項
- **最大応答長**: 300トークン（約400-500文字）
- **同時接続数**: 10接続まで
- **レート制限**: 1分間に20回まで
- **OpenAI API依存**: 稀にサービス停止時は制限あり

### 対象外・非推奨の利用
- **機密情報**を含む質問
- **個人的すぎる内容**の相談
- **長文での詳細説明**要求
- **リアルタイムデータ**の取得

## 🛡 セキュリティ・プライバシー

### データ保護
- **質問内容**: ログに記録するが個人情報は匿名化
- **回答結果**: 24時間後に自動削除
- **プロフィール情報**: 組織内のみアクセス可能
- **OpenAI API**: 質問内容は30日後に削除（OpenAI規約）

### 推奨事項
- **機密プロジェクト名**は避ける
- **個人の評価情報**は含めない
- **組織外の情報**は質問しない
- **一般的な技術質問**を中心に利用

## 🚀 今後の改善予定

### v1.2.0 (2025年2月予定)
- [ ] **応答速度向上** (キャッシュシステム導入)
- [ ] **回答品質向上** (プロンプト最適化)
- [ ] **利用統計表示** (個人・チーム別)

### v1.3.0 (2025年3月予定)
- [ ] **会話履歴機能** (過去の質問との関連付け)
- [ ] **推奨質問機能** (よくある質問の提案)
- [ ] **多言語対応** (英語での質問・回答)

### v2.0.0 (2025年6月予定)
- [ ] **カスタマイズ可能な回答スタイル**
- [ ] **組織固有の知識学習機能**
- [ ] **外部ドキュメント連携**

## 📞 サポート・フィードバック

### 問題が発生した場合
1. **基本確認**: `@knowledge_hub こんにちは` で接続テスト
2. **管理者コマンド**: `/khub-admin status` でシステム状態確認
3. **再起動**: アプリケーションの再起動で多くの問題が解決

### フィードバック方法
- **GitHub Issues**: 機能要求・バグ報告
- **管理者への連絡**: 緊急時・システムエラー
- **利用統計**: 自動収集されている利用パターンから改善

---

**AI機能を活用して、より効率的な知識共有を実現しましょう！** 🤖✨